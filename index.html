<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#10b981">

    <title>Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø°ÙƒÙŠØ© - 1446</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        body { 
            font-family: 'Tajawal', sans-serif; 
            overscroll-behavior-y: contain;
            background-color: #fcfcfc;
            touch-action: manipulation;
            margin: 0; padding: 0;
        }
        .no-select { user-select: none; -webkit-user-select: none; }
        .ltr { direction: ltr !important; text-align: left !important; }
        .rtl { direction: rtl !important; text-align: right !important; }
        
        /* ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø¯ÙˆÙ† Ø­ÙˆØ§Ù Ø¬Ø§Ù†Ø¨ÙŠØ© - Ù…Ø¸Ù‡Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© */
        .app-shell {
            width: 100%;
            max-width: 500px;
            min-height: 100vh;
            background: #fff;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.02);
        }

        .app-header {
            border-bottom-left-radius: 55px;
            border-bottom-right-radius: 55px;
            padding: 55px 25px 35px 25px;
            color: white;
            transition: all 0.3s;
        }
        .theme-islamic { background: linear-gradient(135deg, #10b981, #059669); }
        .theme-english { background: linear-gradient(135deg, #6366f1, #4f46e5); }
        .theme-math { background: linear-gradient(135deg, #f59e0b, #d97706); }

        .capsule-badge {
            background: rgba(0,0,0,0.12);
            padding: 4px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 900;
        }

        .choice-item {
            border-radius: 28px;
            border: 2px solid #f1f5f9;
            padding: 22px;
            margin-bottom: 14px;
            font-weight: 700;
            color: #334155;
            font-size: 19px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            background: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .choice-item:active { transform: scale(0.97); background-color: #f8fafc; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙÙ‚Ø© */
        .nav-holder {
            position: fixed;
            bottom: 0;
            max-width: 500px;
            width: 100%;
            padding: 25px 25px 40px 25px;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(12px);
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 100;
        }
        .btn-next-navy {
            background-color: #1e293b;
            color: white;
            border-radius: 35px;
            padding: 22px;
            font-size: 24px;
            font-weight: 900;
            flex: 2.2;
            box-shadow: 0 10px 25px rgba(30, 41, 59, 0.2);
        }
        .btn-prev-light {
            background-color: transparent;
            color: #e2e8f0;
            border-radius: 35px;
            padding: 22px;
            font-size: 20px;
            font-weight: 700;
            flex: 1;
            text-align: center;
        }

        .audio-circle {
            background: #f1f5f9;
            width: 52px; height: 52px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: #6366f1; border: 1.5px solid #edf2f7;
        }

        .word-tag {
            padding: 12px 24px;
            border-radius: 20px;
            font-weight: 800;
            border: 2px solid #eef2f6;
            background: #ffffff;
            color: #4f46e5;
        }
        .word-tag-selected {
            background: #6366f1;
            color: white;
            border-color: #4f46e5;
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(99, 102, 241, 0.2);
        }

        .drop-box {
            height: 55px; width: 100%;
            border: 2px dashed #e2e8f0;
            border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            font-size: 14px; font-weight: 800; color: #cbd5e1;
        }
        .drop-box-filled { border-style: solid; border-color: #6366f1; background: #eff6ff; color: #1e40af; }
        
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-up { animation: slideUp 0.4s ease-out forwards; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const IMAGES = {
            cheese: "https://up6.cc/2026/02/177124770938951.jpeg",
            fries: "https://up6.cc/2026/02/177124770941072.jpeg",
            clean: "https://up6.cc/2026/02/177124770943813.jpeg",
            trampoline: "https://up6.cc/2026/02/177124770945284.jpeg",
            soup: "https://l.top4top.io/p_3699x0n0i0.jpeg",
            kick: "https://j.top4top.io/p_3699f6l8q0.jpeg",
            tv: "https://g.top4top.io/p_3699ay7by0.jpeg",
            paint: "https://up6.cc/2026/02/17712482217751.jpeg",
            hand: "https://up6.cc/2026/02/177124822183682.jpeg",
            plant: "https://up6.cc/2026/02/177124822187173.jpeg",
            stand: "https://up6.cc/2026/02/17712482218954.jpeg",
            tent: "https://up6.cc/2026/02/177124822191445.jpeg"
        };

        const ISLAMIC_DATA = [
            { q: "Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†:", opts: ["Ø³ØªØ©", "Ø«Ù„Ø§Ø«Ø©", "Ø®Ù…Ø³Ø©"], ans: 0 },
            { q: "Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ù€:", opts: ["Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ©", "Ø§Ù„ÙƒØªØ¨", "Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¢Ø®Ø±"], ans: 1 },
            { q: "Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ© Ù…Ø®Ù„ÙˆÙ‚Ø§Øª Ø¹Ø¸ÙŠÙ…Ø© Ø®Ù„Ù‚Ù‡Ø§ Ø§Ù„Ù„Ù‡ Ù…Ù†:", opts: ["Ù†ÙˆØ±", "Ø·ÙŠÙ†", "Ù†Ø§Ø±"], ans: 0 },
            { q: "Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ© Ø§Ù„Ù…ÙˆÙƒÙ„Ø© Ø¨ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ù‡ÙŠ:", opts: ["Ø§Ù„Ø­ÙØ¸Ø© Ø¹Ù„ÙŠÙ‡Ù… Ø§Ù„Ø³Ù„Ø§Ù…", "Ø¬Ø¨Ø±ÙŠÙ„ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", "Ø¥Ø³Ø±Ø§ÙÙŠÙ„ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…"], ans: 0 },
            { q: "Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ø¬Ù†Ø© ÙˆØ§Ù„Ù†Ø§Ø± Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ù€:", opts: ["Ø§Ù„Ø±Ø³Ù„", "Ø§Ù„ÙƒØªØ¨", "Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¢Ø®Ø±"], ans: 2 },
            { q: "Ø­ÙƒÙ… Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ©:", opts: ["ÙˆØ§Ø¬Ø¨", "Ø³Ù†Ø©", "Ù…Ø³ØªØ­Ø¨"], ans: 0 },
            { q: "Ù‚ÙˆÙ„Ù‡ ï·º (Ø£Ù† ØªØ¤Ù…Ù† Ø¨Ø§Ù„Ù„Ù‡ ÙˆÙ…Ù„Ø§Ø¦ÙƒØªÙ‡..) Ø¯Ù„ÙŠÙ„ Ø¹Ù„Ù‰:", opts: ["Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…", "Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†", "Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø­Ø³Ø§Ù†"], ans: 1 },
            { q: "Ø¥ÙØ±Ø§Ø¯ Ø§Ù„Ù„Ù‡ Ø¨Ø§Ù„Ø±Ø¨ÙˆØ¨ÙŠØ© ÙˆØ§Ù„Ø£Ù„ÙˆÙ‡ÙŠØ© ÙˆØ§Ù„Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ù„ØµÙØ§Øª:", opts: ["Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ù„Ù‡", "Ø§Ù„Ø¥Ø­Ø³Ø§Ù†", "Ø§Ù„Ø¥Ø³Ù„Ø§Ù…"], ans: 0 },
            { q: "ØµØ±Ù Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø© Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡:", opts: ["ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø±Ø¨ÙˆØ¨ÙŠØ©", "ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ù„ÙˆÙ‡ÙŠØ©", "ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡"], ans: 1 },
            { q: "Ù…Ù† Ø§Ù„Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù„Ù‰ ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø±Ø¨ÙˆØ¨ÙŠØ©:", opts: ["Ù„Ø§ Ø®Ø§Ù„Ù‚ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡", "Ù„Ø§ Ù†Ø¯Ø¹Ùˆ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡", "Ù„Ø§ Ù†Ø³Ø¬Ø¯ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡"], ans: 0 },
            { q: "Ù…Ù† Ø§Ù„Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù„Ù‰ ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ù„ÙˆÙ‡ÙŠØ©:", opts: ["Ù„Ø§ Ø®Ø§Ù„Ù‚ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡", "Ù„Ø§ ÙŠØ­ÙŠÙŠ Ø§Ù„Ù…ÙˆØªÙ‰ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡", "Ù„Ø§ Ù†Ø¯Ø¹Ùˆ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡"], ans: 2 },
            { q: "Ù…Ù† Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ© Ø§Ù„Ù†Ø²ÙˆÙ„ Ø¨Ø§Ù„ÙˆØ­ÙŠ ÙˆÙ‡Ùˆ Ø¹Ù…Ù„:", opts: ["Ø¬Ø¨Ø±ÙŠÙ„ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", "Ø§Ù„Ø­ÙØ¸Ø©", "Ø¥Ø³Ø±Ø§ÙÙŠÙ„"], ans: 0 },
            { q: "Ø§Ù„Ø¥Ù‚Ø±Ø§Ø± Ø¨Ø£Ù† Ø§Ù„Ù„Ù‡ Ù‡Ùˆ Ø§Ù„Ø®Ø§Ù„Ù‚ Ø§Ù„Ø±Ø§Ø²Ù‚ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…Ø¯Ø¨Ø±:", opts: ["ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ù„ÙˆÙ‡ÙŠØ©", "ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡", "ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø±Ø¨ÙˆØ¨ÙŠØ©"], ans: 2 },
            { q: "Ø£Ø¹Ø¸Ù… Ø¢ÙŠØ© ÙÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ù‡ÙŠ:", opts: ["Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ", "Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø©", "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ"], ans: 0 },
            { q: "ÙˆØ±Ø¯Øª Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ ÙÙŠ Ø³ÙˆØ±Ø©:", opts: ["Ø³ÙˆØ±Ø© Ø§Ù„ØµÙ", "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø³ÙˆØ±Ø© Ø§Ù„Ø´Ù…Ø³"], ans: 1 },
            { q: "Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© (Ø³Ù†Ø©) ÙÙŠ Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ:", opts: ["Ø­Ø²Ù†", "Ù†Ø¹Ø§Ø³", "Ù„Ø§ ÙŠØªØ¨Ø¹Ù‡Ø§ Ø­ÙØ¸Ù‡Ù…Ø§"], ans: 1 },
            { q: "Ù…Ø¹Ù†Ù‰ ÙƒÙ„Ù…Ø© (ÙˆÙ„Ø§ ÙŠØ¤ÙˆØ¯Ù‡ Ø­ÙØ¸Ù‡Ù…Ø§):", opts: ["Ù„Ø§ ÙŠØµØ¹Ø¨ Ø¹Ù„ÙŠÙ‡", "Ù†Ø¹Ø§Ø³", "Ø­Ø²Ù†"], ans: 0 },
            { q: "Ù‚Ø§Ù„ ØªØ¹Ø§Ù„Ù‰ (ÙˆÙ‚Ù„ Ø±Ø¨ Ø²Ø¯Ù†ÙŠ Ø¹Ù„Ù…Ø§Ù‹) ØªØ¯Ù„ Ø¹Ù„Ù‰:", opts: ["Ø·Ù„Ø¨ Ø§Ù„Ø±Ø­Ù…Ø©", "Ø·Ù„Ø¨ Ø§Ù„Ø¹Ù„Ù…", "Ø·Ù„Ø¨ Ø§Ù„Ù…ØºÙØ±Ø©"], ans: 1 },
            { q: "Ø­ÙƒÙ… Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ø³Ù…Ø§ÙˆÙŠØ©:", opts: ["ÙˆØ§Ø¬Ø¨", "Ø³Ù†Ø©", "Ù…Ø³ØªØ­Ø¨"], ans: 0 },
            { q: "Ø£Ù†Ø²Ù„ Ø§Ù„Ù„Ù‡ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§:", opts: ["Ù…Ø­Ù…Ø¯ ï·º", "Ù…ÙˆØ³Ù‰ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", "Ø¹ÙŠØ³Ù‰ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…"], ans: 0 }
        ];

        const ENGLISH_DATA = [
            { sec: "General", q: "What did you do over the weekend?", opts: ["I am 10 years.", "I cleaned my room."], ans: 1 },
            { sec: "General", q: "How much flour do we need?", opts: ["It is 10 SAR.", "We need 2 cups"], ans: 1 },
            { sec: "General", q: "Can I help you?", opts: ["Yes, please", "No, I am not."], ans: 0 },
            { sec: "Reading", q: "He kicked a ball.", type: "reading", img: IMAGES.kick, opts: ["âœ“", "âœ—"], ans: 0 },
            { sec: "Reading", q: "She watched TV.", type: "reading", img: IMAGES.tv, opts: ["âœ“", "âœ—"], ans: 1 },
            { sec: "Writing", q: "breakfast - cooked she. (rearrange)", opts: ["She cooked breakfast.", "breakfast cooked she."], ans: 0 },
            { sec: "Writing", q: "I'd like ________ please.", img: IMAGES.soup, opts: ["cheese", "soup", "Ice cream"], ans: 1 },
            { sec: "Grammar", q: "How ____ oil do you need?", opts: ["much", "many", "some"], ans: 0 },
            { sec: "Grammar", q: "How ____ tomatoes do you need?", opts: ["much", "many", "some"], ans: 1 },
            { sec: "Grammar", q: "We have ____ flour.", opts: ["any", "some", "many"], ans: 1 },
            { sec: "Grammar", q: "We don't have ____ oil.", opts: ["any", "some", "many"], ans: 0 },
            { sec: "Vocab", type: "vocab", q: "Match the words",
                words: ["Trampoline", "clean", "French fries", "cheese"],
                items: [
                    { id: 0, word: "cheese", img: IMAGES.cheese },
                    { id: 1, word: "French fries", img: IMAGES.fries },
                    { id: 2, word: "clean", img: IMAGES.clean },
                    { id: 3, word: "Trampoline", img: IMAGES.trampoline }
                ]
            },
            { sec: "Orth", q: "Choose correct letter: Pai __ __", img: IMAGES.paint, opts: ["nd", "nt"], ans: 1, full: "Paint" },
            { sec: "Orth", q: "Ha __ __", img: IMAGES.hand, opts: ["nd", "nt"], ans: 0, full: "Hand" },
            { sec: "Orth", q: "Pla __ __", img: IMAGES.plant, opts: ["nd", "nt"], ans: 1, full: "Plant" },
            { sec: "Orth", q: "Sta __ __", img: IMAGES.stand, opts: ["nd", "nt"], ans: 0, full: "Stand" },
            { sec: "Orth", q: "Te __ __", img: IMAGES.tent, opts: ["nd", "nt"], ans: 1, full: "Tent" }
        ];

        const MATH_DATA = [
            { q: "Ø§Ù„ÙƒÙ„ 10ØŒ ÙˆØ§Ù„Ø¬Ø²Ø¡ 8. ÙÙ…Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯ØŸ", type: "math", ans: "2" },
            { q: "Ø§Ù„ÙƒÙ„ 9ØŒ ÙˆØ§Ù„Ø¬Ø²Ø¡ 3. ÙÙ…Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯ØŸ", type: "math", ans: "6" },
            { q: "ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ 9 Ø­Ø¨Ø§Øª ÙƒØ±Ø²ØŒ ØªÙ… Ø£ÙƒÙ„ 3 Ù…Ù†Ù‡Ø§. ÙƒÙ… Ø¨Ù‚ÙŠØŸ", type: "math", ans: "6" },
            { q: "Ø·Ø¨Ù‚ ÙÙŠÙ‡ 6 Ø­Ø¨Ø§Øª ÙƒØ±Ø²ØŒ Ø£ÙƒÙ„Øª Ù‡Ù†Ø¯ Ø­Ø¨ØªÙŠÙ†. ÙƒÙ… Ø¨Ù‚ÙŠØŸ", type: "math", ans: "4" },
            { q: "Ù†Ø§ØªØ¬ Ø·Ø±Ø­: 8 - 3 =", type: "math", ans: "5" },
            { q: "Ù†Ø§ØªØ¬ Ø·Ø±Ø­: 7 - 7 =", type: "math", ans: "0" },
            { q: "Ù†Ø§ØªØ¬ Ø·Ø±Ø­: 12 - 4 =", type: "math", ans: "8" },
            { q: "Ù†Ø§ØªØ¬ Ø¬Ù…Ø¹: 9 + 4 =", type: "math", ans: "13" },
            { q: "Ù†Ø§ØªØ¬ Ø¬Ù…Ø¹: 3 + 9 =", type: "math", ans: "12" },
            { q: "ÙÙŠØµÙ„ Ø§Ø´ØªØ±Ù‰ 7 Ù‚ØµØµØŒ ÙˆØ£Ø®ÙˆÙ‡ 3 Ù‚ØµØµ. Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ØŸ", type: "math", ans: "10" }
        ];

        const App = () => {
            const [view, setView] = useState('menu');
            const [sub, setSub] = useState(null);
            const [idx, setIdx] = useState(0);
            const [userAns, setUserAns] = useState({});
            const [vAns, setVAns] = useState({});
            const [selected, setSelected] = useState(null);
            const [mInp, setMInp] = useState("");

            const questions = sub === 'islamic' ? ISLAMIC_DATA : sub === 'math' ? MATH_DATA : ENGLISH_DATA;

            const speak = (text, cb) => {
                const s = window.speechSynthesis; if (s.speaking) s.cancel();
                const u = new SpeechSynthesisUtterance(text); u.lang = 'en-US'; u.rate = 0.6; u.pitch = 1.4;
                const v = s.getVoices().find(x => x.lang.startsWith('en') && (x.name.includes('Samantha') || x.name.includes('Zira') || x.name.includes('Google')));
                if (v) u.voice = v; if (cb) u.onend = cb; s.speak(u);
            };

            const speakQ = (text) => {
                if (text.includes('____')) {
                    const [p1, p2] = text.split('____');
                    speak(p1, () => setTimeout(() => speak(p2), 1000));
                } else speak(text);
            };

            const handleSelect = (i) => {
                if (userAns[idx] !== undefined) return;
                setUserAns({...userAns, [idx]: i});
                if (sub === 'english') {
                    const q = questions[idx];
                    if (q.q.includes('____')) speak(q.q.replace('____', q.opts[i]));
                    else speak(q.full || q.opts[i]);
                }
            };

            const getScore = () => {
                let s = 0;
                questions.forEach((q, i) => {
                    if (q.type === 'vocab') {
                        q.items.forEach(it => { if (vAns[it.id] === it.word) s++; });
                    } else if (sub === 'math') {
                        if (userAns[i] == q.ans) s++;
                    } else if (userAns[i] === q.ans) s++;
                });
                return s;
            };

            const totalScore = sub === 'islamic' ? 20 : sub === 'math' ? 10 : (ENGLISH_DATA.length - 1 + 4);

            return (
                <div className="app-shell no-select">
                    {view === 'menu' && (
                        <div className="flex flex-col items-center px-8 pt-24 animate-up">
                            <div className="w-24 h-24 bg-emerald-500 rounded-[2.5rem] flex items-center justify-center text-5xl mb-10 shadow-xl text-white">ğŸ“</div>
                            <h1 className="text-3xl font-black text-slate-800 mb-12 tracking-tight">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø°ÙƒÙŠØ©</h1>
                            <div className="w-full space-y-5">
                                <button onClick={() => { setSub('islamic'); setIdx(0); setUserAns({}); setView('quiz'); }} className="w-full bg-white border-2 border-slate-100 p-8 rounded-[40px] shadow-sm flex items-center justify-between active:scale-95 transition-all">
                                    <span className="text-xl font-bold">Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©</span>
                                    <span className="text-3xl">ğŸ“–</span>
                                </button>
                                <button onClick={() => { setSub('math'); setIdx(0); setUserAns({}); setView('quiz'); }} className="w-full bg-white border-2 border-slate-100 p-8 rounded-[40px] shadow-sm flex items-center justify-between active:scale-95 transition-all">
                                    <span className="text-xl font-bold">Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</span>
                                    <span className="text-3xl">ğŸ§®</span>
                                </button>
                                <button onClick={() => { setSub('english'); setIdx(0); setUserAns({}); setView('quiz'); }} className="w-full bg-white border-2 border-slate-100 p-8 rounded-[40px] shadow-sm flex items-center justify-between active:scale-95 transition-all">
                                    <span className="text-xl font-bold">English Assessment</span>
                                    <span className="text-3xl">ğŸŒ</span>
                                </button>
                            </div>
                        </div>
                    )}

                    {view === 'quiz' && (
                        <>
                            <div className={`app-header ${sub==='islamic'?'theme-islamic':sub==='math'?'theme-math':'theme-english'} animate-up`}>
                                <div className="flex items-center justify-between">
                                    <div className="capsule-badge">{idx + 1} / {questions.length}</div>
                                    <div className="flex-1 mx-6 h-1.5 bg-white/30 rounded-full overflow-hidden">
                                        <div className="h-full bg-white transition-all duration-700" style={{ width: `${((idx + 1) / questions.length) * 100}%` }}></div>
                                    </div>
                                    <span className="text-xs font-black tracking-widest uppercase">{sub==='islamic'?'Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±':sub==='math'?'Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª':'QUIZ'}</span>
                                </div>
                            </div>

                            <div className="flex-1 px-8 pt-10 pb-32 overflow-y-auto animate-up">
                                {questions[idx].type === 'vocab' ? (
                                    <div className="ltr text-center">
                                        <div className="flex items-center justify-between mb-8 rtl">
                                            <h2 className="text-2xl font-black text-slate-800">:Match the words</h2>
                                            <button onClick={() => speak("Match the words with the images")} className="audio-circle active:scale-90 shadow-sm"><svg width="24" height="24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/></svg></button>
                                        </div>
                                        <div className="flex flex-wrap justify-center gap-3 mb-10">
                                            {questions[idx].words.map(w => !Object.values(vAns).includes(w) && (
                                                <button key={w} onClick={() => { setSelected(w); speak(w); }} className={`word-tag active:scale-95 transition-all ${selected === w ? 'word-tag-selected' : ''}`}>{w}</button>
                                            ))}
                                        </div>
                                        <div className="grid grid-cols-2 gap-6 w-full">
                                            {questions[idx].items.map(it => (
                                                <div key={it.id} className="flex flex-col items-center gap-3">
                                                    <div className="bg-white p-2 rounded-[2rem] border border-slate-50 h-32 w-full flex items-center justify-center shadow-inner overflow-hidden"><img src={it.img} className="max-h-full object-contain" /></div>
                                                    <div onClick={() => { if(selected) { setVAns({...vAns, [it.id]: selected}); speak(selected); setSelected(null); }}} className={`drop-box active:scale-95 ${vAns[it.id] ? 'drop-box-filled' : ''}`}>{vAns[it.id] || "Tap Here"}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ) : sub === 'math' ? (
                                    <div className="text-center rtl px-4">
                                        <h2 className="text-3xl font-black text-slate-800 mb-12 leading-tight">{questions[idx].q}</h2>
                                        <input type="number" value={mInp} onChange={(e)=>setMInp(e.target.value)} placeholder="Ø£Ø¬Ø¨ Ù‡Ù†Ø§" className="w-full p-8 text-5xl font-black text-center bg-slate-50 border-4 border-slate-100 rounded-[35px] focus:border-orange-400 outline-none transition-all" />
                                        <button onClick={()=>{setUserAns({...userAns, [idx]: mInp}); setMInp("");}} className="mt-10 bg-orange-500 text-white w-full py-7 rounded-[30px] font-black text-2xl shadow-xl active:scale-95 transition-all">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
                                    </div>
                                ) : (
                                    <div className={sub === 'english' ? 'ltr' : 'rtl'}>
                                        <div className="flex justify-between items-start gap-4 mb-10">
                                            <h2 className="text-2xl sm:text-3xl font-black text-slate-800 leading-tight">{questions[idx].q}</h2>
                                            {sub === 'english' && (
                                                <button onClick={() => speakQ(questions[idx].q)} className="audio-circle flex-shrink-0 mt-1 shadow-sm active:scale-90"><svg width="24" height="24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/></svg></button>
                                            )}
                                        </div>
                                        {questions[idx].img && (
                                            <div className="flex justify-center mb-10 bg-slate-50 p-8 rounded-[40px] shadow-inner"><img src={questions[idx].img} className="max-h-44 rounded-3xl object-contain" /></div>
                                        )}
                                        <div className="space-y-3 px-2">
                                            {questions[idx].opts.map((opt, i) => {
                                                const has = userAns[idx] !== undefined; const cor = i === questions[idx].ans; const sel = userAns[idx] === i;
                                                let st = "choice-item ";
                                                if (has) {
                                                    if (cor) st += "border-green-500 bg-green-50 text-green-700 shadow-sm";
                                                    else if (sel) st += "border-red-500 bg-red-50 text-red-700";
                                                    else st += "opacity-30 border-slate-50 grayscale";
                                                }
                                                return <div key={i} onClick={() => handleSelect(i)} className={st}><span>{opt}</span>{has && cor && <span>âœ…</span>}</div>;
                                            })}
                                        </div>
                                    </div>
                                )}
                            </div>

                            <div className="nav-holder ltr">
                                <button onClick={() => idx > 0 && setIdx(idx-1)} disabled={idx === 0} className="btn-prev-light disabled:opacity-0">{sub === 'english' ? 'Back' : 'Ø§Ù„Ø³Ø§Ø¨Ù‚'}</button>
                                <button onClick={() => { if(idx < questions.length - 1) setIdx(idx+1); else { setView('results'); confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } }); }}} className="btn-next-navy active:scale-95">
                                    {idx === questions.length - 1 ? (sub === 'english' ? 'Finish' : 'Ø¥Ù†Ù‡Ø§Ø¡') : (sub === 'english' ? 'Next' : 'Ø§Ù„ØªØ§Ù„ÙŠ')}
                                </button>
                            </div>
                        </>
                    )}

                    {view === 'results' && (
                        <div className="flex flex-col items-center px-10 pt-24 text-center animate-up">
                            <div className="text-9xl mb-10 animate-bounce">ğŸ†</div>
                            <h2 className="text-4xl font-black text-slate-800 mb-2">Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ø§Ù‹!</h2>
                            <p className="text-slate-400 font-bold mb-14">Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­ ÙŠØ§ Ø¨Ø·Ù„.</p>
                            <div className="bg-slate-50 p-16 rounded-[60px] mb-12 border border-slate-100 shadow-inner w-full">
                                <div className="text-8xl font-black text-emerald-600 tracking-tighter">%{Math.round((getScore() / totalScore) * 100)}</div>
                                <div className="text-slate-400 font-bold mt-2">{getScore()} / {totalScore}</div>
                            </div>
                            <button onClick={() => { setView('menu'); setUserAns({}); setVAns({}); }} className="w-full py-8 bg-indigo-600 text-white font-black rounded-[35px] shadow-2xl text-2xl active:scale-95 transition-all">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

